// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Go Code Generator. DO NOT EDIT.

package armpreviewalertrule

import "time"

// DimensionNameAndValue - Dimension name and value
type DimensionNameAndValue struct {
	// REQUIRED; Name of the dimension
	Name *string

	// REQUIRED; Value of the dimension
	Value *string
}

// EvaluatedPeriod - Details of the evaluated period.
type EvaluatedPeriod struct {
	// The high threshold value for the evaluation period.
	HighThreshold *float64

	// The low threshold value for the evaluation period.
	LowThreshold *float64

	// The metric value for the evaluation period.
	MetricValue *float64

	// Indicates whether the threshold was met during the evaluation period.
	ThresholdMet *bool

	// The timestamp of the evaluated period.
	Timestamp *time.Time
}

// Evaluation - An evaluation of the alert rule.
type Evaluation struct {
	// The state of the alert after the evaluation.
	AlertState *AlertState

	// An array of evaluated periods.
	EvaluatedPeriods []*EvaluatedPeriod

	// The time when the evaluation was performed.
	EvaluationTime *time.Time

	// Indicates whether the threshold was met for this evaluation.
	ThresholdMet *bool
}

// LogAlertRuleCondition - A condition of the scheduled query rule.
type LogAlertRuleCondition struct {
	// The extent of deviation required to trigger an alert. Allowed values are 'Low', 'Medium' and 'High'. This will affect how
	// tight the threshold is to the metric series pattern. Relevant and required only for dynamic threshold rules of the kind
	// LogAlert.
	AlertSensitivity *string

	// Specifies the type of threshold criteria
	CriterionType *CriterionType

	// List of Dimensions conditions
	Dimensions []*LogAlertRuleDimension

	// The minimum number of violations required within the selected lookback time window required to raise an alert. Relevant
	// only for rules of the kind LogAlert.
	FailingPeriods *LogAlertRuleConditionFailingPeriods

	// Use this option to set the date from which to start learning the metric historical data and calculate the dynamic thresholds
	// (in ISO8601 format). Relevant only for dynamic threshold rules of the kind LogAlert.
	IgnoreDataBefore *time.Time

	// The column containing the metric measure number. Relevant only for rules of the kind LogAlert.
	MetricMeasureColumn *string

	// The name of the metric to be sent. Relevant and required only for rules of the kind LogToMetric.
	MetricName *string

	// The criteria operator. Relevant and required only for rules of the kind LogAlert.
	Operator *ConditionOperator

	// KQL log query alert
	Query *string

	// The column containing the resource id. The content of the column must be a uri formatted as resource id. Relevant only
	// for rules of the kind LogAlert.
	ResourceIDColumn *string

	// the criteria threshold value that activates the alert. Relevant and required only for static threshold rules of the kind
	// LogAlert.
	Threshold *float64

	// Aggregation type. Relevant and required only for rules of the kind LogAlert.
	TimeAggregation *TimeAggregation
}

// LogAlertRuleConditionFailingPeriods - The minimum number of violations required within the selected lookback time window
// required to raise an alert. Relevant only for rules of the kind LogAlert.
type LogAlertRuleConditionFailingPeriods struct {
	// The number of violations to trigger an alert. Should be smaller or equal to numberOfEvaluationPeriods. Default value is
	// 1
	MinFailingPeriodsToAlert *int64

	// The number of aggregated lookback points. The lookback time window is calculated based on the aggregation granularity (windowSize)
	// and the selected number of aggregated points. Default value is 1
	NumberOfEvaluationPeriods *int64
}

// LogAlertRuleCriteria - The rule criteria that defines the conditions of the scheduled query rule.
type LogAlertRuleCriteria struct {
	// A list of conditions to evaluate against the specified scopes
	AllOf []*LogAlertRuleCondition
}

// LogAlertRuleDimension - Dimension splitting and filtering definition
type LogAlertRuleDimension struct {
	// REQUIRED; Name of the dimension
	Name *string

	// REQUIRED; Operator for dimension values
	Operator *DimensionOperator

	// REQUIRED; List of dimension values
	Values []*string
}

// LogAlertRuleProperties - scheduled query rule Definition
type LogAlertRuleProperties struct {
	// The rule criteria that defines the conditions of the scheduled query rule.
	Criteria *LogAlertRuleCriteria

	// The description of the scheduled query rule.
	Description *string

	// The display name of the alert rule
	DisplayName *string

	// The flag which indicates whether this scheduled query rule is enabled. Value should be true or false
	Enabled *bool

	// How often the scheduled query rule is evaluated represented in ISO 8601 duration format. Relevant and required only for
	// rules of the kind LogAlert.
	EvaluationFrequency *string

	// If specified then overrides the query time range (default is WindowSize*NumberOfEvaluationPeriods). Relevant only for rules
	// of the kind LogAlert.
	OverrideQueryTimeRange *string

	// The list of resource id's that this scheduled query rule is scoped to.
	Scopes []*string

	// Severity of the alert. Should be an integer between [0-4]. Value of 0 is severest. Relevant and required only for rules
	// of the kind LogAlert.
	Severity *AlertSeverity

	// List of resource type of the target resource(s) on which the alert is created/updated. For example if the scope is a resource
	// group and targetResourceTypes is Microsoft.Compute/virtualMachines, then a different alert will be fired for each virtual
	// machine in the resource group which meet the alert criteria. Relevant only for rules of the kind LogAlert
	TargetResourceTypes []*string

	// The period of time (in ISO 8601 duration format) on which the Alert query will be executed (bin size). Relevant and required
	// only for rules of the kind LogAlert.
	WindowSize *string
}

// LogAlertRuleResource - The scheduled query rule resource.
type LogAlertRuleResource struct {
	// REQUIRED; The geo-location where the resource lives
	Location *string

	// REQUIRED; The rule properties of the resource.
	Properties *LogAlertRuleProperties

	// Indicates the type of scheduled query rule. The default is LogAlert.
	Kind *Kind

	// Resource tags.
	Tags map[string]*string
}

type Request struct {
	// REQUIRED; The location of the rule resource.
	Location *string

	// REQUIRED
	Properties *RequestProperties
}

type RequestProperties struct {
	// REQUIRED; Specifies the timespan of the preview in ISO 8601 duration format.
	Timespan *string

	// The properties of the alert rule to preview.
	ScheduledQueryRuleProperties *LogAlertRuleResource
}

type Response struct {
	// An array of rule preview results.
	RulePreviewResults []*RulePreviewResult
}

// RulePreviewResult - A rule preview result containing a dimension combination and an array of evaluations.
type RulePreviewResult struct {
	// The list of dimensions for the evaluation.
	DimensionCombination []*DimensionNameAndValue

	// An array of evaluations.
	Evaluations []*Evaluation
}
